# 虚拟化与云计算发展
## 虚拟化发展
- 2001年VMWare打不ESX和GSX
- 2005年Xen 3.0发布
- 2006年KVM诞生
## 云计算厂商起步年份
- 2006年Amazon推出S3和EC2
- 2008年Google发布了GAE
- 2009年阿里云成立
- 2010年Microsoft发布了Azure
- 2011年Openstack推出
## 云计算特点优势
1. 按需自主服务
2. 资源池化
3. 按计量付费
4. 广泛网络接入
5. 快速弹性伸缩
## 云计算几大件
计算、存储、网络、数据库、安全

# 虚拟化常见的两种架构
## 寄居架构
在操作系统之上安装运行虚拟化程序，依赖于主机操作系统对设备的支持和物理资源管理
## 裸金属架构
直接在硬件上安装虚拟化软件，再在其上安装操作系统和应用，依赖虚拟层内核和服务器控制台进行管理
## 阿里云弹性计算虚拟化架构的演进
- 2010 - 2015年用的是Xen架构
- 2015 第一次架构升级，采用KVM架构，虚拟化损耗降低
- 2016 阿里云发布ECS企业级产品。移动互联网爆发，很多中小企业抢占市场没时间采购物理服务器，也就开始用ECS
- 2017 第二次虚拟化架构升级，神龙架构，弹性裸金属服务器，虚拟化损耗降为0
- 2022年推出全新计算体系架构CIPU

# ECS

##  计费模式
- 按量付费
- 包年包月：可以中途退费，但是可能会按照按量会多收点钱
- 抢占式示例：不稳定，会被收走。适用于无状态服务
> 节省计划？== ECS按量付费的预付会员卡

费用构成：实例规格费用 + 镜像费用 + 云盘费用 + 公网带宽费用 + 快照费用

## ECS配件
- 实例
- 块存储（云盘）
- 镜像：公共镜像、自定义镜像、共享镜像、云市场镜像和社区镜像。
- 网络：VPC
- 安全组：虚拟防火墙，控制ECS实例的出入站流量。
- 弹性网卡：ENI，VPC中的虚拟网络接口，用于连接ECS
- 部署集：支持高可用策略，同一部署集内的实例会严格分散在不同的物理服务器上。
- 公网IP：计费模式可选择：
	- 按使用流量：需要设置峰值带宽。比如每个G 0.8元，峰值带宽10Mbps。
	- 按固定带宽：一直都是某个带宽，会贵一些。

>ESS弹性伸缩配置中，不支持云市场镜像。因为部分云市场镜像是收费的

## 实例规格族

ecs.<规格族>.\<nx>large
- 规格族：小写字母表示性能领域，数字越大表示新一代规格族
	- c 计算型
	- g 通用型
	- r 内存型
	- ebm 裸金属
- nx：n表示CPU核数

## 选型推荐
在云端，我们常见的CPU：内存的几个配置是1：1、1：2、1：4和1：8。
- 1：1与1：2的配置，尤其是1：2的比例，如2核4G，4核8G等，我们称之为“黄金比例”，适用于绝大多数场景，尤其是高资源消耗的计算场景、个人网页、企业建站等小型部署。
- 1：4的配置，由于其内存占比较高，所以适合数据库类型的部署。
- 1：8的配置，由于其内存占比更高，所以适合内存型数据库的部署或其他消耗内存的服务。
- 对于云盘的选择：
	- 我们大可不必过度关注磁盘的大小，因为磁盘的大小都是可以一键扩容的，所以磁盘不是重点关注点，重点关注点在于磁盘的IOPS
	- 云上也不建议用LVM，可能在一致性快照恢复上会有问题。

## 运行状态
Stopped和Running是稳定状态，可以进行运维。

实例处于Running状态仅代表实例运行起来，类似于对电脑进行开机，但是实例的操作系统并不一定运行起来了。您可以通过查看实例的健康状态，判断实例的操作系统是否已经运行起来。
只有当实例的操作系统运行起来后，网络服务才能正常工作，才可以通过SSH、RDP等方式进行远程访问。

在系统内关机，实例还在，仍要收费。
在控制台调OpenAPI关机可以释放实例。

# 地域
ECS实例如果用做web服务器需要完成备案，需要在指定的地域购买ECS实例。

# 可用区
每个地域的多个可用区 使用不同的电力和网络。
同地域的不同可用区之间是走backbone内网互通的，网络时延更小。

每个地域Region，包含多个可用区，对应列表：
https://www.alibabacloud.com/help/zh/cloud-migration-guide-for-beginners/latest/regions-and-zones

对于容灾要求高，采用多可用区；对网络时延要求高，部署在同一可用区。

# ECS连接方式
## Workbench
https://help.aliyun.com/zh/ecs/user-guide/workbench-overview/?spm=a2c4g.11186623.help-menu-25365.d_0_1_2_2.1d5f2d39yyqjS9&scm=20140722.H_108412._.OR_help-T_cn~zh-V_1
阿里云提供的浏览器远程连接方式
需要设置Workbench的服务关联角色、RAM用户的使用Workbench的权限

## VNC
https://help.aliyun.com/zh/ecs/user-guide/log-on-to-an-instance-by-using-vnc?spm=a2c4g.11186623.help-menu-25365.d_0_1_2_5.71a04079BdIdVZ
故障排查的连接方式，不属于远程连接，直接进入linux实时页面

## 命令行
可以用命令行实现将无公网IP的ECS的22/3389端口port-forward到本地来连接。
https://help.aliyun.com/zh/ecs/user-guide/connect-to-an-instance-by-using-ali-instance-cli/